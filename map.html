<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Georgia Home‑Value Map</title>

  <script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-lite@5"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>

  <style>
    body { font-family: Arial, sans-serif; margin: 40px; background: #fafafa; color: #333; }
    header { text-align: center; margin-bottom: 20px; }
    nav a { margin: 0 15px; color: #5c2ca4; text-decoration: none; font-weight: bold; }
    nav a:hover { text-decoration: underline; }
    h1 { margin-bottom: 10px; }
    .explanation { max-width: 900px; margin: 30px auto 10px; line-height: 1.6; }
    .explanation h2 { font-size: 1.5em; margin-bottom: 10px; }
    .explanation p { margin-bottom: 10px; }
    #map-wrapper { text-align: center; }
    #map { display: inline-block; width: 900px; height: 600px; }
  </style>
</head>
<body>

  <header>
    <nav>
      <a href="index.html">Overview</a> |
      <a href="dashboard.html">Dashboard</a> |
      <a href="narrative.html">Narrative</a> |
      <a href="map.html">Map</a>
    </nav>
    <h1>Georgia Home‑Value in the US Context</h1>
  </header>

  <div class="explanation">
    <h2>How Does Georgia Compare?</h2>
    <p>This map shows the 2025 median home values for every US state. Georgia’s median home value of around <strong>$340,000</strong> places it in the <em>upper‑middle</em> tier nationwide.</p>
    <p>Geometrically, Southeastern states generally have lower median home prices, while West Coast and Northeast states exhibit higher values. Georgia sits just above its neighbors like Alabama and Florida, illustrating strong growth driven by population influx and urban development.</p>
    <p>Hover over each state to view its exact median value and compare patterns of housing affordability across regions.</p>
  </div>

  <div id="map-wrapper">
    <div id="map"></div>
  </div>

  <script>
    const mapSpec = {
      "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
      "description": "US states choropleth of median home values in 2025, highlighting Georgia.",
      "width": 900,
      "height": 600,
      "projection": { "type": "albersUsa" },
      "data": {
        "url": "https://cdn.jsdelivr.net/npm/us-atlas@3/states-10m.json",
        "format": { "type": "topojson", "feature": "states" }
      },
      "transform": [
        {
          "lookup": "properties.name",
          "from": {
            "data": {
              "url": "data/home_values.csv",
              "format": { "type": "csv" }
            },
            "key": "RegionName",
            "fields": ["2025-01-31"]
          }
        }
      ],
      "mark": {"type": "geoshape", "stroke": "#ccc"},
      "encoding": {
        "color": {
          "field": "2025-01-31",
          "type": "quantitative",
          "title": "Median Value ($)",
          "scale": { "scheme": "blues" },
          "legend": { "orient": "bottom-left" }
        },
        "tooltip": [
          { "field": "properties.name", "title": "State" },
          { "field": "2025-01-31", "title": "Median Value", "format": "$,.0f" }
        ]
      }
    };

    vegaEmbed('#map', mapSpec, { actions: false });
  </script>

</body>
</html>
